<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>lz-utils test</title>
</head>

<body>
    <script src="./test.data.js"></script>
    <script>
        window.module = {};
    </script>
    <script src="../dist/decompress.js"></script>
    <script>
        module.decompress = module.exports;
    </script>
    <script src="../dist/inflate.js"></script>
    <script>
        module.inflate = module.exports;
    </script>
    <script src="../dist/inflate-sync.js"></script>
    <script>
        module.inflateSync = module.exports;
    </script>
    <script>
        console.log(module);

        const testData = window.testData;
        console.log(testData.raw);

        const decompressStr = module.decompress(testData.decompressStr);
        const decompressData = JSON.parse(decompressStr);
        console.log(decompressData);

        decompressData.list.forEach((item, i) => {
            console.assert(item === testData.raw.list[i]);
        });

        const inflateStrSync = module.inflateSync(testData.inflateStr);

        module.inflate(testData.inflateStr).then((inflateStr) => {

            console.assert(inflateStrSync === inflateStr);

            // console.log(inflateStr);
            const inflateData = JSON.parse(inflateStr);
            console.log(inflateData);

            inflateData.list.forEach((item, i) => {
                console.assert(item === testData.raw.list[i]);
            });
        });
        
    </script>
</body>

</html>